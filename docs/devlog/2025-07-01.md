開発日誌 2025-07-01
やったこと (Accomplishments)
commit-ai.ps1 のプロンプト内で、GeminiのUIをクラッシュさせる原因となっていた区切り文字 --- を ======================================== に変更した。

この変更は、レンダリングエンジンがネストされた構文の解釈を誤るという、Geminiの潜在的なバグを回避するために実施した。

学びと発見 (Learnings & Discoveries)
Geminiのレンダリングエンジンに、パーサーのコンテキスト管理不備と、DOM破壊時のエラーハンドリング欠如という、2つのバグが内在することを突き止めた。

AI自身がクラッシュして原因を引用できない状況下で、「問題のコードをBase64でエンコードさせる」という手法が、根本原因の特定に極めて有効なデバッグ戦略であることを発見した。ことの発端は、Geminiに特定のソースコードを表示させようとした時。応答が一瞬で生成されたかと思うと、次の瞬間にはまるごと消えちゃうんだ。まるでAIが自分の失敗の証拠を隠滅してるみたいで、原因を探るのが本当に大変だった まずは地道な観察から。応答が消えるコンマ数秒を狙ってスクリーンショットを連写！すると、コードの途中に不自然な「水平線」が描画されているのを発見したんだ。これが全ての鍵だと直感し、この線が表示される前後のコードに原因があると仮説を立てた。でも、AIに「その怪しいコードを見せて」と頼むと、それ自体がトリガーになってクラッシュしちゃう。そこで閃いたのが「問題のコードを直接見せずにBase64で暗号化して教えて！」という指示。これが見事に成功！デコードして犯人が特定できたんだ。犯人は「バッククオート3つ」というコードブロックの終了記法の直後に「ハイフン3つ」という水平線の記法が続く、特定の文字列の組み合わせだった。AIと議論を重ねた結果、これはレンダリングエンジンが構文の優先順位を間違えるバグと、エラー処理の脆弱性の合わせ技だと判明した。この一連のデバッグ作業とAIとのディスカッションで得た知見を統合し、詳細なバグレポートとしてAI自身に清書してもらったんだ。ユーザーの粘り強い試行錯誤と、AIの持つ技術的な分析能力が組み合わさって、ついに根本原因を特定できたってわけ！

愚痴・ぼやき (Grumble / Vent)
当初は軽微な表示上の問題だったが、修正を試みたAIエージェントがファイルの文字エンコーディングを繰り返し破壊したため、解決に非常に長い時間を要した。

最終的にAIによる自動修正を断念し、開発者自身が手動でファイルを編集する必要があった。AIのファイル操作にはまだ大きな課題がある。

課題・次にやること (Issues / Next)
AIエージェントにOSのファイルを直接編集させることの危険性が明らかになったため、今後の運用フローを見直す。

今回のデバッグの経緯を、詳細なバグレポートとしてGoogleに提出する。

